<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NocLauncher</title>
  <style>
    :root{
      --green:#1fbf52;
      --green2:#18a646;
      --ink: rgba(8,10,12,.92);
      --card: rgba(0,0,0,.22);
      --border: rgba(255,255,255,.18);
      --text: rgba(255,255,255,.95);
      --muted: rgba(255,255,255,.78);
      --shadow: 0 22px 60px rgba(0,0,0,.45);
      --ease: cubic-bezier(.2,.8,.2,1);
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; }

    body{
      background:
        radial-gradient(900px 360px at 20% 0%, rgba(47,191,84,.07), rgba(47,191,84,0)),
        radial-gradient(980px 420px at 85% 100%, rgba(255,116,186,.06), rgba(255,116,186,0)),
        linear-gradient(180deg, rgba(10,12,18,.25), rgba(8,10,14,.31)),
        url('./img/fon.png') center/cover no-repeat;
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI Variable", "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      display:flex;
      align-items:stretch;
      justify-content:stretch;
      overflow:hidden;
    }

    .wrap{
      width: 100%;
      height: 100%;
      padding: 22px;
      border-radius: 0;
      background: linear-gradient(180deg, rgba(18,22,32,.86), rgba(10,12,18,.92));
      border: 1px solid rgba(131,255,174,.14);
      box-shadow: inset 0 0 0 1px rgba(47,191,84,.06);
      position: relative;
      z-index: 2;
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
    }

    .logo{
      width: 54px;
      height: 54px;
      border-radius: 18px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,.28);
      box-shadow: 0 14px 26px rgba(0,0,0,.30), 0 0 20px rgba(47,191,84,.28);
      background: rgba(18,64,46,.92);
    }
    .logo img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .title{ font-weight: 1000; font-size: 18px; letter-spacing: .2px; }
    .sub{ margin-top: 2px; color: var(--muted); font-size: 12px; }

    .barWrap{
      margin-top: 16px;
      height: 12px;
      border-radius: 999px;
      overflow:hidden;
      background: rgba(0,0,0,.28);
      border: 1px solid rgba(47,191,84,.46);
      box-shadow: inset 0 0 14px rgba(47,191,84,.12);
    }

    .bar{
      height: 100%;
      width: 35%;
      background: linear-gradient(90deg, rgba(73,255,131,.92), rgba(173,255,205,.95));
      box-shadow: 0 0 18px rgba(73,255,131,.45);
      animation: ind 1.2s var(--ease) infinite;
    }

    @keyframes ind{
      0%{ transform: translateX(-70%); }
      100%{ transform: translateX(240%); }
    }

    .centerPromo{
      align-self: center;
      justify-self: center;
      width: min(480px, calc(100vw - 220px));
      padding: 9px 10px;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(0,0,0,.16), rgba(0,0,0,.10));
      border: 1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(8px);
      box-shadow: 0 18px 48px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.12);
      text-align: center;
      display: grid;
      gap: 10px;
      place-items: center;
    }

    .status{
      color: rgba(255,255,255,.98);
      font-size: clamp(18px, 2.1vw, 30px);
      font-weight: 900;
      line-height: 1.28;
      text-shadow: 0 2px 12px rgba(0,0,0,.4);
      max-width: 92%;
      animation: textPulse 700ms var(--ease);
    }

    .small{
      color: rgba(180,255,208,.92);
      font-size: 12px;
      letter-spacing: .13em;
      text-transform: uppercase;
      font-weight: 800;
    }

    .launchPanel{
      width: min(920px, calc(100vw - 44px));
      align-self: center;
      padding: 12px 16px 10px;
      border-radius: 14px;
      background: rgba(0,0,0,.30);
      border: 1px solid rgba(255,255,255,.16);
      backdrop-filter: blur(5px);
    }

    @keyframes textPulse {
      0% { opacity: .35; transform: translateY(5px) scale(.99); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    .sakura{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }
    .petal{
      position: absolute;
      top: -10%;
      width: 14px;
      height: 10px;
      border-radius: 12px 10px 12px 10px;
      background: linear-gradient(135deg, rgba(255,220,236,.95), rgba(255,143,198,.88));
      opacity: .78;
      filter: drop-shadow(0 0 6px rgba(255,155,210,.25));
      animation-name: fall;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }
    @keyframes fall {
      0% { transform: translate3d(0, -12%, 0) rotate(0deg); }
      100% { transform: translate3d(22px, 125vh, 0) rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="sakura" id="sakura" aria-hidden="true"></div>
  <div class="wrap" aria-label="Загрузка NocLauncher">
    <div class="brand">
      <div class="logo" aria-hidden="true"><img src="../../assets/icon.png" alt="" /></div>
      <div>
        <div class="title">NocLauncher</div>
        <div class="sub">Запускаю лаунчер…</div>
      </div>
    </div>

    <div class="centerPromo">
      <div class="small">NocLauncher • Startup</div>
      <div class="status" id="status">Лучший стабильный выбор, без вирусов и вреда для вашего компьютера.</div>
    </div>

    <div class="launchPanel">
      <div class="barWrap" aria-hidden="true"><div class="bar"></div></div>
    </div>
  </div>

  <script>
    // Sakura petals background
    (() => {
      const root = document.getElementById('sakura');
      if (!root) return;
      const count = 22;
      for (let i = 0; i < count; i++) {
        const p = document.createElement('span');
        p.className = 'petal';
        p.style.left = (Math.random() * 100).toFixed(2) + '%';
        p.style.animationDuration = (6 + Math.random() * 7).toFixed(2) + 's';
        p.style.animationDelay = (-Math.random() * 8).toFixed(2) + 's';
        p.style.opacity = (0.45 + Math.random() * 0.45).toFixed(2);
        p.style.transform = `scale(${(0.7 + Math.random() * 0.8).toFixed(2)})`;
        root.appendChild(p);
      }
    })();

    // Main process can post status messages (optional)
    window.addEventListener('message', (e) => {
      try{
        const d = e.data || {};
        if (typeof d.text === 'string') {
          document.getElementById('status').textContent = d.text;
        }
      }catch(_){ }
    });

    // Rotating promo/status lines during startup
    (() => {
      const el = document.getElementById('status');
      if (!el) return;
      const lines = [
        'Лучший стабильный выбор, без вирусов и вреда для вашего компьютера.',
        'Только у нас самые лучшие идеи для обновления лаунчера!',
        'Следите за самыми новыми форками и релизами на нашем Github репозитории!',
        'Решайте проблемы, ошибки и ищите новых друзей для игры в Telegram: @bundstraze!',
        'Проверяйте файлы на вирусы, прежде чем устанавливать их через кнопку проверки на вирусы!'
      ];
      let i = Math.floor(Math.random() * lines.length);
      el.textContent = lines[i];

      const pickNextIndex = () => {
        if (lines.length < 2) return 0;
        let n = i;
        while (n === i) n = Math.floor(Math.random() * lines.length);
        return n;
      };

      const loop = () => {
        const delay = 3800 + Math.floor(Math.random() * 1800); // 3.8s..5.6s
        setTimeout(() => {
          i = pickNextIndex();
          el.style.animation = 'none';
          void el.offsetWidth; // reflow for replay
          el.style.animation = '';
          el.textContent = lines[i];
          loop();
        }, delay);
      };

      loop();
    })();
  </script>
</body>
</html>
