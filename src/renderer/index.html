<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NocLauncher</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="mode-java">
  <!-- Subtle animated background (can be disabled in settings: "экономия ресурсов") -->
  <canvas id="fx" aria-hidden="true"></canvas>

  <div class="app">
    <main class="screen" role="application" aria-label="NocLauncher">
      <div class="appShell">
        <!-- Sidebar -->
        <aside class="sidebar" aria-label="Боковое меню">
          <div class="sbTop">
            <div class="sbBrand" aria-label="NocLauncher">
              <div class="sbLogo" aria-hidden="true"><img src="../../assets/icon.png" alt="" /></div>
              <div class="sbBrandTxt">
                <div class="sbName">NocLauncher 1.0.6</div>
                <div class="sbSub">Всегда рады вас видеть!</div>
              </div>
            </div>

            <!-- Ник (используется для Java/offline режима) -->
            <div class="field profileField">
              <div class="fieldIco" aria-hidden="true">👤</div>
              <input class="fieldInput" id="username" placeholder="Ник" autocomplete="off" />
            </div>
          </div>

          <nav class="sbNav" aria-label="Разделы">
            <button class="sbItem active" id="sbNews" type="button" aria-label="Новости">
              <span class="sbIco" aria-hidden="true">💬</span>
              <span class="sbLbl">Новости</span>
            </button>

            <button class="sbItem" id="btnOpenLibrary" type="button" aria-label="Библиотека">
              <span class="sbIco" aria-hidden="true">🧩</span>
              <span class="sbLbl">Библиотека</span>
            </button>

            <button class="sbItem" id="btnOpenModrinth" type="button" aria-label="Моды" title="Моды и библиотека">
              <span class="sbIco" aria-hidden="true">🧱</span>
              <span class="sbLbl">Моды</span>
            </button>

            <button class="sbItem" id="btnInstrumente" type="button" aria-label="Дополнение" title="Открыть папку instrumente">
              <span class="sbIco" aria-hidden="true">🧰</span>
              <span class="sbLbl">Дополнение</span>
            </button>
          </nav>

          <div class="sbDivider"></div>

          <div class="sbSectionTitle">MINECRAFT</div>

          <div class="sbGames" role="tablist" aria-label="Издание Minecraft">
            <button class="sbGame active" id="modeJava" type="button" aria-selected="true">
              <div class="sbGameTitle">Minecraft: Java Edition</div>
              <div class="sbGameHint">Версии • Инстансы • Моды</div>
            </button>

            <button class="sbGame" id="modeBedrock" type="button" aria-selected="false">
              <div class="sbGameTitle">Minecraft: Bedrock Edition</div>
              <div class="sbGameHint">Minecraft for Windows</div>
            </button>
</div>

          <div class="sbBottom">
            <button class="sbPill" id="btnResources" type="button" title="Обновления лаунчера">Обновления</button>
            <button class="sbPill" id="btnOpenSettings" type="button" title="Настройки">Настройки</button>
          </div>
        </aside>

        <!-- Main -->
        <section class="mainArea" aria-label="Основная область">
          <header class="topHeader" aria-label="Панель навигации">
            <div class="topLeft">
              <div class="editionTitle" id="editionTitle">MINECRAFT: ИЗДАНИЕ JAVA</div>

              <div class="topTabs" id="topTabs" role="tablist" aria-label="Вкладки">
                <button class="tabBtn active" id="navPlay" type="button" aria-label="Играть">Играть</button>
                <button class="tabBtn" id="btnProfiles" type="button" aria-label="Установки">Установки</button>
                <button class="tabBtn" id="tabSkins" type="button" aria-label="Скины">Скины</button>
                              </div>
            </div>

            <div class="topRight" aria-label="Инструменты">
              <button class="topPill hidden" id="btnStop" type="button" title="Остановить">Стоп</button>
              <button class="topPill" id="btnGameDiag" type="button" title="Логи и диагностика">Логи</button>
              <button class="topPill bedrockOnlyTop" id="btnAddCreatorFriendMain" type="button" title="Добавить создателя в Xbox друзья">Добавить в друзья</button>
              <button class="topPill hidden" id="btnAuthDiag" type="button" title="Диагностика входа">Вход</button>
            </div>
          </header>

          <div class="content">
            <div class="hero" aria-label="Промо-экран">
              <div class="heroBg" aria-hidden="true"></div>
              <div class="heroShade" aria-hidden="true"></div>
              <div class="heroPetals" aria-hidden="true">
                <span class="petal"></span><span class="petal"></span><span class="petal"></span><span class="petal"></span>
                <span class="petal"></span><span class="petal"></span><span class="petal"></span><span class="petal"></span>
                <span class="petal"></span><span class="petal"></span><span class="petal"></span><span class="petal"></span>
              </div>

              <div class="heroContent">
                <div class="heroBadge">NocLauncher v1.0.6</div>
                <div class="heroH1">Играй с комфортом</div>
                <div class="heroP">Выбери версию, лоадер и нажми кнопку <b>ИГРАТЬ</b> внизу.</div>

                <div class="heroMeta" id="heroMeta">
                  <div class="heroMetaItem">
                    <div class="heroMetaK">Выбрано</div>
                    <div class="heroMetaV" id="pickedVersionHero">—</div>
                  </div>
                  <div class="heroMetaItem">
                    <div class="heroMetaK">Лоадер</div>
                    <div class="heroMetaV" id="loaderHero">—</div>
                  </div>
                </div>
              </div>

              <!-- Overlays -->
              <div class="heroOverlays">
                <!-- Bedrock box (появляется только в Bedrock режиме) -->
                <div class="bedrockBox hidden" id="bedrockBox">
                  <div class="bedrockTitle">Minecraft for Windows</div>
                  <div class="bedrockState" id="bedrockState">Проверяю установку…</div>
                  <div class="hrow">
                    <button class="btnPrimary" id="btnBedrockAction" type="button">Проверка…</button>
                    <button class="chip chipSmall" id="btnBedrockVersions" type="button">Версии</button>
                    <button class="chip chipSmall" id="btnBedrockUninstall" type="button">Удалить</button>
                    <button class="chip chipSmall" id="btnBedrockSettings" type="button">Настройки</button>
                    <button class="chip chipSmall" id="btnBedrockLibrary" type="button">Библиотека</button>
                    <button class="chip chipSmall" id="btnBedrockAddons" type="button">Дополнения</button>
                    <button class="chip chipSmall" id="btnBedrockMsFix" type="button">MS Fix</button>
                    <button class="chip chipSmall" id="btnBedrockXboxFix" type="button">Xbox Fixer</button>
                    <!-- removed: Win11 quick fix -->
                    <button class="chip chipSmall" id="btnBedrockVirusCheck" type="button">Проверка на вирусы</button>
                    <button class="chip chipSmall" id="btnBedrockSkinsSite" type="button">Скачать скины</button>
                    <button class="chip chipSmall" id="btnBedrockExperiments" type="button">Эксперименты</button>
                  </div>
                </div>

                <!-- Download/progress -->
                <div class="dlBox hidden" id="dlBox" aria-live="polite">
                  <div class="dlHint hidden" id="dlHint">Первая установка может занять больше времени</div>
                  <div class="dlTop">
                    <div class="dlLabel" id="dlText">—</div>
                    <div class="dlPct" id="dlPct">0%</div>
                  </div>
                  <div class="dlBarWrap"><div class="dlBar" id="dlBar"></div></div>
                  <div class="dlFoot">
                    <div class="dlPath" id="dlPath">Папка: —</div>
                    <button class="ghostBtn" id="btnOpenDir" type="button">Открыть папку</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Java only info row -->
            <div class="infoRow" id="javaOnlineRow">
              <label class="toggle hidden">
                <input type="checkbox" id="onlineMode" />
                <span class="track" aria-hidden="true"></span>
                <span class="toggleTxt">Лицензия (Microsoft)</span>
              </label>
              <div class="hrow javaToolsRow">
                <div class="chip chipSmall modeBadge">Режим: Пиратка (стабильный)</div>
              </div>
            </div>

            <!-- Health / timeline (скрыто по умолчанию, используется в диагностике) -->
            <div class="healthPanel hidden" id="healthPanel">
              <div class="healthItem" id="healthNick">• Ник: —</div>
              <div class="healthItem" id="healthMemory">• Память: —</div>
              <div class="healthItem" id="healthServers">• Серверы: —</div>
              <div class="healthItem" id="healthLoader">• Лоадер: —</div>
            </div>
            <div class="timeline hidden" id="timeline"></div>

          </div>

          <!-- Bottom launch bar -->
          <footer class="bottomBar" aria-label="Панель запуска">
            <div class="bbCenter">
              <!-- remember kept for compatibility -->
              <input type="checkbox" id="remember" class="hidden" checked />

              <button class="btnPlay" id="btnPlay" type="button">
                <span class="playIco" aria-hidden="true">▶</span>
                <span id="actionLabel">Установить</span>
              </button>
            </div>

            <div class="bbLeft" id="javaControls">
              <button class="versionPill" id="btnPickVersion" type="button" title="Выбрать версию">
                <span class="chipKey">Версия</span>
                <span class="chipVal" id="pickedVersion">—</span>
              </button>

              <!-- Для совместимости с текущей логикой (используется как внутреннее значение) -->
              <select class="selectMini hidden" id="versionSelect" aria-hidden="true" tabindex="-1"></select>

              <div class="bbDropdown" id="loaderDropdown">
                <button class="bbSelect bbSelectBtn" id="loaderBtn" type="button" aria-haspopup="listbox" aria-expanded="false" title="Лоадер">
                  <span class="bbSelectText" id="loaderBtnText">Vanilla</span>
                  <span class="bbSelectCaret" aria-hidden="true">▾</span>
                </button>
                <div class="bbMenu hidden" id="loaderMenu" role="listbox" aria-label="Лоадер">
                  <button class="bbMenuItem" type="button" data-value="vanilla">Vanilla</button>
                  <button class="bbMenuItem" type="button" data-value="forge">Forge</button>
                  <button class="bbMenuItem" type="button" data-value="optifine">OptiFine</button>
                </div>
              </div>

              <!-- Hidden native select kept for JS/settings compatibility -->
              <select class="selectMini hidden" id="loaderMode" title="Лоадер" aria-hidden="true" tabindex="-1">
                <option value="vanilla">Vanilla</option>
                <option value="forge">Forge</option>
                <option value="optifine">OptiFine</option>
              </select>
            </div>

            <div class="bbRight">
              <div class="bbMeta">
                <div class="bbStatus" id="status">Готов</div>
                <div class="bbSub" id="footMeta">—</div>
              </div>
              <div class="bbDisclaimer">Не является продуктом Mojang</div>
            </div>
          </footer>

          <!-- Hidden legacy buttons kept for JS compatibility -->
          <button class="hidden" id="btnMods" type="button">Моды</button>
          <button class="hidden" id="btnOpenSettings2" type="button">Настройки (2)</button>

        </section>
      </div>


            <div class="modal hidden" id="modalBedrockSettings" role="dialog" aria-label="Bedrock настройки" aria-modal="true">
              <div class="modalCard" style="max-width: 980px;">
                <div class="modalHead">
                  <div class="modalTitle">Bedrock: графика и настройки</div>
                  <button class="iconBtn" id="btnCloseBedrockSettings" type="button" aria-label="Закрыть">✕</button>
                </div>
                <div class="form">
                  <div class="formRow">
                    <div class="lbl">Пресеты</div>
                    <div class="hrow" style="gap:8px; justify-content:flex-end; flex-wrap:wrap;">
                      <button class="btn mini" id="btnBrPresetLow" type="button">Низко</button>
                      <button class="btn mini" id="btnBrPresetMed" type="button">Средне</button>
                      <button class="btn mini" id="btnBrPresetHigh" type="button">Высоко</button>
                      <button class="btn mini" id="btnBrPresetUltra" type="button">Ультра</button>
                      <button class="btn mini ghost" id="btnBrOptionsOpen" type="button">Открыть options.txt</button>
                      <button class="btn mini ghost" id="btnBrOptionsRefresh" type="button">Обновить</button>
                    </div>
                  </div>

                  <div class="help" id="bedrockOptionsHint">Я меняю файл настроек Bedrock (options.txt). Игра должна быть закрыта, чтобы всё применилось стабильно.</div>

                  <div class="formRow" style="margin-top:10px;">
                    <div class="lbl">Все параметры</div>
                    <div class="hrow" style="gap:8px; width:100%;">
                      <input class="input" id="brOptSearch" placeholder="Поиск по ключу (например gfx_, render, ui_)" />
                      <button class="btn mini ghost" id="btnBrUsefulOnly" type="button">Только полезные: ВЫКЛ</button>
                    </div>
                  </div>
                  <div class="list" id="brOptionsList"></div>
                  <div class="help">Совет: меняй значения аккуратно. Если не уверен — используй пресеты.</div>
                </div>
              </div>
            </div>

      <div class="modal hidden" id="modalVersions" role="dialog" aria-label="Версии" aria-modal="true">
              <div class="modalCard modalCard--versions">
                <div class="modalHead">
                  <div class="modalTitle">Выбор версии</div>
                  <button class="iconBtn" id="btnCloseVersions" type="button" aria-label="Закрыть">✕</button>
                </div>
                <div class="modalTools">
                  <div class="hrow" style="gap:8px;">
                    <button class="chip chipSmall active" id="btnVersionsOnline" type="button" title="Онлайн список">Онлайн</button>
                    <button class="chip chipSmall" id="btnVersionsInstalled" type="button" title="Установленные">Установленные</button>
                  </div>
                  <select class="selectMini" id="typeFilter">
                    <option value="all">Все</option>
                    <option value="release">Release</option>
                    <option value="snapshot">Snapshot</option>
                    <option value="old_beta">Old Beta</option>
                    <option value="old_alpha">Old Alpha</option>
                  </select>
                  <input class="inputMini" id="versionSearch" placeholder="Поиск версии…" autocomplete="off" />
                  <button class="chip chipSmall" id="btnRefreshVersions" type="button" title="Обновить">⟲</button>
                </div>
                <div class="list" id="versionsList"></div>
                <div class="modalFoot">
                  <button class="chip" id="btnMoreVersions" type="button">Показать ещё</button>
                </div>
              </div>
            </div>

      <div class="modal hidden" id="modalSettings" role="dialog" aria-label="Настройки" aria-modal="true">
              <div class="modalCard">
                <div class="modalHead">
                  <div class="modalTitle">Настройки</div>
                  <button class="iconBtn" id="btnCloseSettings" type="button" aria-label="Закрыть">✕</button>
                </div>
                <div class="form">
                  <div class="formRow">
                    <div class="lbl">Папка игры</div>
                    <div class="hrow">
                      <input class="inputMini mono" id="gameDir" placeholder="C:\\..." />
                      <button class="chip chipSmall" id="btnPickDir" type="button">Выбрать</button>
                    </div>
                  </div>
                  <div class="formRow">
                    <div class="lbl">Java (необязательно)</div>
                    <input class="inputMini mono" id="javaPath" placeholder="C:\\...\\javaw.exe" />
                  </div>
                  <div class="formRow">
                    <div class="lbl">Скин</div>
                    <select class="inputMini" id="skinMode">
                      <option value="auto">Авто</option>
                      <option value="file">Файл PNG</option>
                      <option value="nick">Ник скина</option>
                      <option value="url">Ссылка PNG</option>
                      <option value="off">Выкл</option>
                    </select>
                  </div>
                  <div class="formRow" id="skinRowFile">
                    <div class="hrow">
                      <input class="inputMini mono" id="offlineSkinPath" placeholder="C:\\...\\skin.png" />
                      <button class="chip chipSmall" id="btnPickSkin" type="button">Файл</button>
                    </div>
                  </div>
                  <div class="formRow" id="skinRowNick">
                    <div class="hrow">
                      <input class="inputMini" id="skinNick" placeholder="Ник скина" />
                      <button class="chip chipSmall" id="btnFetchSkinNick" type="button">Найти</button>
                    </div>
                  </div>
                  <div class="formRow" id="skinRowUrl">
                    <input class="inputMini mono" id="skinUrl" placeholder="https://.../skin.png" />
                  </div>
                  <div class="formRow">
                    <div class="lbl">Память (MB)</div>
                    <div class="grid2">
                      <input class="inputMini" id="memMin" type="number" min="512" step="256" placeholder="Min" />
                      <input class="inputMini" id="memMax" type="number" min="1024" step="256" placeholder="Max" />
                    </div>
                  </div>
                  <div class="formRow">
                    <div class="lbl">Скачивание</div>
                    <div class="grid2">
                      <select class="inputMini" id="downloadMode">
                        <option value="normal">Обычная</option>
                        <option value="fast">Быстрая</option>
                        <option value="turbo">Турбо</option>
                      </select>
                      <select class="inputMini" id="downloadSource">
                        <option value="auto">Авто (лучший)</option>
                        <option value="mojang">Mojang</option>
                        <option value="bmclapi">BMCLAPI</option>
                      </select>
                    </div>
                  </div>
                  <div class="formRow">
                    <label class="check">
                      <input type="checkbox" id="mirrorFallback" />
                      <span>Фолбэк на зеркало при проблемах</span>
                    </label>
                  </div>
                  <div class="formRow split">
                    <div class="col">
                      <div class="lbl">Параллельность</div>
                      <input class="inputMini" id="downloadParallel" type="number" min="0" max="16" placeholder="0 = авто" />
                    </div>
                    <div class="col">
                      <div class="lbl">Лимит (KB/s)</div>
                      <input class="inputMini" id="downloadMaxKBps" type="number" min="0" placeholder="0 = без лимита" />
                    </div>
                  </div>
                  <div class="formRow">
                    <div class="lbl">JVM пресет</div>
                    <select class="inputMini" id="jvmPreset">
                      <option value="auto">Авто</option>
                      <option value="stable">Стабильно</option>
                      <option value="fps">Максимум FPS</option>
                      <option value="lowend">Слабый ПК</option>
                    </select>
                  </div>
                  <div class="formRow">
                    <label class="check">
                      <input type="checkbox" id="safeLaunchNoMods" />
                      <span>Безопасный запуск (временно без модов)</span>
                    </label>
                  </div>
                  <div class="formRow">
                    <label class="check">
                      <input type="checkbox" id="uiLowPower" />
                      <span>Отключить анимированный фон (экономия ресурсов)</span>
                    </label>
                  </div>
                  <div class="formRow">
                    <label class="check">
                      <input type="checkbox" id="closeLauncherOnGameStart" />
                      <span>Закрывать лаунчер после запуска игры</span>
                    </label>
                  </div>
                  <div class="formRow actionsRow">
                    <button class="btn mini" id="btnAutoSetup" type="button">Сделать всё</button>
                    <button class="btn mini ghost" id="btnFix" type="button">Исправить</button>
                    <button class="btn mini ghost" id="btnRepair" type="button">Repair</button>
                  </div>
                  <div class="formRow actionsRow">
                    <button class="btn mini ghost" id="btnSnapshot" type="button">Снимок</button>
                    <select class="inputMini" id="snapshotSelect"></select>
                    <button class="btn mini ghost" id="btnRestoreSnapshot" type="button">Откат</button>
                  </div>
                  <div class="formRow actionsRow">
                    <button class="btn mini ghost" id="btnExportInstance" type="button">Экспорт</button>
                    <button class="btn mini ghost" id="btnImportDot" type="button">Импорт</button>
                  </div>
                  <div class="formRow actionsRow">
                    <button class="btn mini ghost" id="btnCleanup" type="button">Очистка</button>
                    <button class="btn mini ghost" id="btnSyncSettings" type="button">Синхр.</button>
                  </div>
                  <div class="formRow">
                    <button class="btnPrimary" id="btnSaveSettings" type="button">Сохранить</button>
                  </div>
                </div>
              </div>
            </div>

<!-- Crash / game diagnostics modal -->
      <div class="modal hidden" id="modalCrash" role="dialog" aria-label="Диагностика игры" aria-modal="true">
        <div class="modalCard" style="max-width: 980px;">
          <div class="modalHead">
            <div class="modalTitle">Minecraft закрылся с ошибкой</div>
            <button class="iconBtn" id="btnCloseCrash" type="button" aria-label="Закрыть">✕</button>
          </div>

          <div class="form">
            <div class="formRow">
              <div class="lbl">Подсказка</div>
              <div class="help" id="crashHint">—</div>
            </div>

            <div class="formRow">
              <div class="lbl">Файл лога лаунчера</div>
              <div class="hrow">
                <input class="inputMini mono" id="crashLogPath" readonly placeholder="—" />
                <button class="chip chipSmall" id="btnOpenCrashLog" type="button">Открыть</button>
                <button class="chip chipSmall" id="btnOpenCrashFolder" type="button">Папка</button>
                <button class="chip chipSmall" id="btnCopyCrash" type="button">Копировать</button>
              </div>
            </div>

            <div class="formRow">
              <div class="lbl">Хвост логов</div>
              <textarea class="ta" id="crashTail" rows="14" spellcheck="false" placeholder="Здесь появятся логи…"></textarea>
              <div class="help">Если вылет повторяется — просто нажми “Копировать” и отправь сюда.</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Profiles modal -->
      <div class="modal hidden" id="modalProfiles" role="dialog" aria-label="Инстансы" aria-modal="true">
        <div class="modalCard">
          <div class="modalHead">
        <div class="modalTitle">Установки</div>
            <button class="iconBtn" id="btnCloseProfiles" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="list" id="profilesList"></div>
        </div>
      </div>

      <!-- Bedrock versions modal -->
      <div class="modal hidden" id="modalBedrockVirus" role="dialog" aria-label="Проверка файлов на вирусы" aria-modal="true">
        <div class="modalCard" style="max-width: 860px;">
          <div class="modalHead">
            <div class="modalTitle">Bedrock: проверка файлов на вирусы</div>
            <button class="iconBtn" id="btnCloseBedrockVirus" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="form">
            <div class="help">Откроется встроенное окно выбранного сервиса. Сначала — лучшие проверяльщики файлов, ниже — дополнительные сервисы репутации/песочницы.</div>

            <div class="formRow"><div class="lbl">Лучшие (файлы)</div></div>
            <div class="hrow" style="gap:8px; flex-wrap:wrap;">
              <button class="btn mini" data-virus-url="https://www.virustotal.com/gui/home/upload">VirusTotal</button>
              <button class="btn mini" data-virus-url="https://metadefender.opswat.com/">MetaDefender Cloud</button>
              <button class="btn mini" data-virus-url="https://opentip.kaspersky.com/">Kaspersky OpenTIP</button>
              <button class="btn mini" data-virus-url="https://virusdesk.kaspersky.com/">Kaspersky VirusDesk</button>
              <button class="btn mini" data-virus-url="https://online.drweb.com/">Dr.Web Online</button>
              <button class="btn mini" data-virus-url="https://virusscan.jotti.org/">Jotti</button>
            </div>

            <div class="formRow" style="margin-top:10px;"><div class="lbl">Средние (файлы)</div></div>
            <div class="hrow" style="gap:8px; flex-wrap:wrap;">
              <button class="btn mini ghost" data-virus-url="https://www.fortiguard.com/virusscanner">FortiGuard</button>
              <button class="btn mini ghost" data-virus-url="https://avcheck.net/">AVCheck</button>
              <button class="btn mini ghost" data-virus-url="https://www.virscan.org/">VirSCAN</button>
              <button class="btn mini ghost" data-virus-url="https://www.eset.com/int/home/online-scanner/">ESET Online Scanner</button>
              <button class="btn mini ghost" data-virus-url="https://www.trendmicro.com/en_us/forHome/products/housecall.html">Trend Micro HouseCall</button>
              <button class="btn mini ghost" data-virus-url="https://valkyrie.comodo.com/">Comodo Valkyrie</button>
              <button class="btn mini ghost" data-virus-url="https://gridinsoft.com/online-virus-scanner">Gridinsoft Scanner</button>
              <button class="btn mini ghost" data-virus-url="https://www.checkfile.ru/">CheckFile (RU)</button>
            </div>

            <div class="formRow" style="margin-top:10px;"><div class="lbl">Песочницы / анализ</div></div>
            <div class="hrow" style="gap:8px; flex-wrap:wrap;">
              <button class="btn mini ghost" data-virus-url="https://any.run/">ANY.RUN</button>
              <button class="btn mini ghost" data-virus-url="https://www.hybrid-analysis.com/">Hybrid Analysis</button>
              <button class="btn mini ghost" data-virus-url="https://www.joesandbox.com/">Joe Sandbox</button>
              <button class="btn mini ghost" data-virus-url="https://analyze.intezer.com/">Intezer Analyze</button>
              <button class="btn mini ghost" data-virus-url="https://sandbox.threatbook.com/">ThreatBook Sandbox</button>
              <button class="btn mini ghost" data-virus-url="https://www.unpac.me/">UnpacMe</button>
              <button class="btn mini ghost" data-virus-url="https://www.vmray.com/">VMRay</button>
              <button class="btn mini ghost" data-virus-url="https://www.capesandbox.com/">CAPE Sandbox</button>
              <button class="btn mini ghost" data-virus-url="https://www.reversinglabs.com/products/spectra-analyze">ReversingLabs</button>
            </div>

            <div class="formRow" style="margin-top:10px;"><div class="lbl">Дополнительно: URL/IP/IOC репутация</div></div>
            <div class="hrow" style="gap:8px; flex-wrap:wrap;">
              <button class="btn mini ghost" data-virus-url="https://exchange.xforce.ibmcloud.com/">IBM X-Force</button>
              <button class="btn mini ghost" data-virus-url="https://talosintelligence.com/">Cisco Talos</button>
              <button class="btn mini ghost" data-virus-url="https://urlscan.io/">URLScan</button>
              <button class="btn mini ghost" data-virus-url="https://sitecheck.sucuri.net/">Sucuri SiteCheck</button>
              <button class="btn mini ghost" data-virus-url="https://quttera.com/website-malware-scanner">Quttera</button>
              <button class="btn mini ghost" data-virus-url="https://www.criminalip.io/">Criminal IP</button>
              <button class="btn mini ghost" data-virus-url="https://otx.alienvault.com/">AlienVault OTX</button>
              <button class="btn mini ghost" data-virus-url="https://pulsedive.com/">Pulsedive</button>
              <button class="btn mini ghost" data-virus-url="https://bazaar.abuse.ch/">MalwareBazaar</button>
              <button class="btn mini ghost" data-virus-url="https://urlhaus.abuse.ch/">URLHaus</button>
              <button class="btn mini ghost" data-virus-url="https://threatfox.abuse.ch/">ThreatFox</button>
              <button class="btn mini ghost" data-virus-url="https://viz.greynoise.io/">GreyNoise</button>
              <button class="btn mini ghost" data-virus-url="https://phishtank.org/">PhishTank</button>
              <button class="btn mini ghost" data-virus-url="https://www.spamhaus.org/">Spamhaus</button>
              <button class="btn mini ghost" data-virus-url="https://safeweb.norton.com/">Norton Safe Web</button>
              <button class="btn mini ghost" data-virus-url="https://www.urlvoid.com/">URLVoid</button>
              <button class="btn mini ghost" data-virus-url="https://www.ipqualityscore.com/">IPQualityScore</button>
              <button class="btn mini ghost" data-virus-url="https://www.abuseipdb.com/">AbuseIPDB</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal hidden" id="modalBedrockMsFix" role="dialog" aria-label="MS Fix мастер" aria-modal="true">
        <div class="modalCard" style="max-width: 920px;">
          <div class="modalHead">
            <div class="modalTitle">Bedrock: MS Fix (пошаговый мастер)</div>
            <button class="iconBtn" id="btnCloseBedrockMsFix" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="form">
            <div class="help" id="bedrockMsFixHint">Пошагово восстановим Store/Xbox/Gaming Services для запуска Bedrock.</div>
            <div class="hrow" style="gap:8px; flex-wrap:wrap; margin-top:8px;">
              <button class="btn mini" id="btnMsFixDiag" type="button">1) Диагностика</button>
              <button class="btn mini" id="btnMsFixAuto" type="button">2) Авто-фикс</button>
              <button class="btn mini" id="btnMsFixStoreDeep" type="button">3) Глубокий ремонт Store</button>
              <button class="btn mini ghost" id="btnMsFixStoreUpdates" type="button">4) Store: обновления</button>
              <button class="btn mini ghost" id="btnMsFixXboxApp" type="button">5) Установить Xbox app</button>
              <button class="btn mini ghost" id="btnMsFixGamingServices" type="button">6) Установить Gaming Services</button>
              <button class="btn mini ghost" id="btnMsFixMinecraftStore" type="button">7) Открыть Minecraft в Store</button>
              <button class="btn mini ghost" id="btnMsFixXboxNetworking" type="button">8) Xbox Networking</button>
              <button class="btn mini" id="btnMsFixReboot" type="button">9) Перезагрузить ПК</button>
            </div>
            <div class="list" id="bedrockMsFixLog" style="margin-top:10px; max-height:260px;"></div>
            <div class="help">Рекомендуемый сценарий: Диагностика → Авто-фикс → Store обновления → Перезагрузка ПК.</div>
          </div>
        </div>
      </div>

      <div class="modal hidden" id="modalBedrockExperiments" role="dialog" aria-label="Bedrock эксперименты" aria-modal="true">
        <div class="modalCard" style="max-width: 980px;">
          <div class="modalHead">
            <div class="modalTitle">Bedrock: эксперименты / treatment tags</div>
            <button class="iconBtn" id="btnCloseBedrockExperiments" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="form">
            <div class="formRow">
              <div class="lbl">Файл и действия</div>
              <div class="hrow" style="gap:8px; justify-content:flex-end; flex-wrap:wrap;">
                <button class="btn mini ghost" id="btnBrExpRefresh" type="button">Обновить</button>
                <button class="btn mini" id="btnBrExpBackup" type="button">Бэкап</button>
              </div>
            </div>
            <div class="help" id="bedrockExpHint">—</div>

            <div class="formRow" style="margin-top:10px;">
              <div class="lbl">Все теги</div>
              <input class="input" id="brExpSearch" placeholder="Поиск по тегу (например friends, realms, inbox)" />
            </div>
            <div class="list" id="brExpList"></div>
            <div class="help">Вкл = тег присутствует в файле. Выкл = тег удалён из списка. Перед изменениями делай бэкап.</div>
          </div>
        </div>
      </div>

      <div class="modal hidden" id="modalBedrockVersions" role="dialog" aria-label="Bedrock версии" aria-modal="true">
        <div class="modalCard">
          <div class="modalHead">
            <div class="modalTitle">Bedrock версии</div>
            <button class="iconBtn" id="btnCloseBedrockVersions" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="form">
            <div class="lbl" id="bedrockMgrState">Статус: проверка...</div>
            <div class="list" id="bedrockVersionsList"></div>
            <div class="hrow" style="margin-top:10px;">
              <button class="chip" id="btnBedrockInstallSelected" type="button">Установить выбранную</button>
              <button class="chip" id="btnBedrockRollback" type="button">Откат</button>
              <button class="chip" id="btnOpenOfficialBedrockMgr" type="button">Открыть менеджер</button>
            </div>
            <div class="lbl" id="bedrockMgrHint" style="margin-top:8px;">Подсказка появится после проверки.</div>
          </div>
        </div>
      </div>

      <!-- Bedrock content modal -->
      <div class="modal hidden" id="modalBedrockContent" role="dialog" aria-label="Bedrock контент" aria-modal="true">
        <div class="modalCard" style="max-width: 980px;">
          <div class="modalHead">
            <div class="modalTitle">Bedrock: контент</div>
            <button class="iconBtn" id="btnCloseBedrockContent" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="form">
            <div class="seg" id="bedrockContentTabs" style="margin-bottom:10px;">
              <button class="segBtn active" data-tab="packs" type="button">Ресурсы</button>
              <!-- Миры скрыты по запросу -->
              <!-- Скины скрыты по запросу -->
            </div>

            <div id="bedrockTabPacks">
              <div class="formRow">
                <div class="lbl">Папки Bedrock</div>
                <div class="help" id="bedrockPathsHint">—</div>
              </div>
              <div class="formRow">
                <div class="grid2">
                  <select class="inputMini" id="bedrockPackKind">
                    <option value="resourcePacks">Текстуры (resource_packs)</option>
                    <option value="behaviorPacks">Ресурсы/Аддоны (behavior_packs)</option>
                  </select>
                  <div class="hrow" style="justify-content:flex-end;">
                    <button class="btn mini" id="btnBedrockPackInstall" type="button">Установить</button>
                    <button class="btn mini ghost" id="btnBedrockPackOpen" type="button">Открыть папку</button>
                  </div>
                </div>
              </div>
              <div class="help">Поддержка .mcpack / .mcaddon / .zip. После установки открой игру — пак появится в списке.</div>
            </div>

            <!-- Вкладка миров скрыта по запросу -->

            <!-- Вкладка скинов скрыта по запросу -->
          </div>
        </div>
      </div>

      <!-- Resources modal -->
      <div class="modal hidden" id="modalResources" role="dialog" aria-label="Ресурсы" aria-modal="true">
        <div class="modalCard">
          <div class="modalHead">
            <div class="modalTitle">Ресурсы и шейдеры</div>
            <button class="iconBtn" id="btnCloseResources" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="form">
            <div class="formRow">
              <div class="lbl">Тип</div>
              <select class="inputMini" id="resKind">
                <option value="resourcepacks">Resourcepacks</option>
                <option value="shaderpacks">Shaderpacks</option>
              </select>
            </div>
            <div class="formRow actionsRow">
              <button class="btn mini" id="btnResInstall" type="button">Установить ZIP</button>
              <button class="btn mini ghost" id="btnResOpenFolder" type="button">Открыть папку</button>
              <button class="btn mini ghost" id="btnResRefresh" type="button">Обновить</button>
            </div>
            <div class="list" id="resList"></div>
          </div>
        </div>
      </div>

      <!-- Cleanup modal -->
      <div class="modal hidden" id="modalCleanup" role="dialog" aria-label="Очистка" aria-modal="true">
        <div class="modalCard">
          <div class="modalHead">
            <div class="modalTitle">Очистка</div>
            <button class="iconBtn" id="btnCloseCleanup" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="form">
            <div class="formRow"><div class="lbl" id="cleanupHint">—</div></div>
            <div class="formRow">
              <label class="check"><input type="checkbox" id="clLogs" checked /><span>Логи</span></label>
              <label class="check"><input type="checkbox" id="clCrashes" checked /><span>Crash-reports</span></label>
              <label class="check"><input type="checkbox" id="clNatives" checked /><span>Временные natives</span></label>
              <label class="check"><input type="checkbox" id="clPart" checked /><span>.part/.tmp</span></label>
              <label class="check"><input type="checkbox" id="clExports" /><span>Экспорты</span></label>
            </div>
            <div class="formRow actionsRow">
              <button class="btn mini" id="btnCleanupRun" type="button">Очистить</button>
              <button class="btn mini ghost" id="btnCleanupScan" type="button">Скан</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Sync modal -->
      <div class="modal hidden" id="modalSync" role="dialog" aria-label="Синхронизация" aria-modal="true">
        <div class="modalCard">
          <div class="modalHead">
            <div class="modalTitle">Синхронизация настроек</div>
            <button class="iconBtn" id="btnCloseSync" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="form">
            <div class="formRow"><div class="lbl">Скопировать options/servers (и optionsof для OptiFine) между инстансами.</div></div>
            <div class="formRow"><div class="grid2"><select class="inputMini" id="syncFrom"></select><select class="inputMini" id="syncTo"></select></div></div>
            <div class="formRow actionsRow"><button class="btn mini" id="btnSyncApply" type="button">Применить</button></div>
          </div>
        </div>
      </div>

      <!-- Auth modal -->
      <div class="modal hidden" id="modalAuth" role="dialog" aria-label="Авторизация" aria-modal="true">
        <div class="modalCard">
          <div class="modalHead">
            <div class="modalTitle">Авторизация (Microsoft)</div>
            <button class="iconBtn" id="btnCloseAuth" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="form">
            <div class="formRow"><div class="lbl" id="authHint">—</div></div>
            <div class="formRow"><div class="hrow"><button class="chip" id="btnOpenAuthUrl" type="button">Открыть вход</button><button class="chip" id="btnRetryAuth" type="button">Повторить</button></div></div>
            <div class="formRow"><div class="lbl">Логи</div><textarea class="inputMini mono" id="authLog" rows="10" readonly style="resize:none;"></textarea></div>
          </div>
        </div>
      </div>

      <!-- Mods modal -->
      <div class="modal hidden" id="modsModal" role="dialog" aria-modal="true" aria-label="Библиотека">
        <div class="modalCard">
          <div class="modalHead">
            <div class="modalTitle" id="modsTitle">Библиотека</div>
            <button class="iconBtn" id="modsClose" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="modalBody">
            <div class="modsTop">
              <div class="seg" id="libraryTabs">
                <button class="segBtn active" data-libtab="mods" type="button">Моды</button>
                <button class="segBtn" data-libtab="resourcepacks" type="button">Текстуры</button>
                <button class="segBtn" data-libtab="shaderpacks" type="button">Шейдеры</button>
              </div>
              <input class="input" id="modsSearch" placeholder="Поиск…" />
              <button class="btn btnSmall" id="modsSearchBtn" type="button">Искать</button>
              <button class="btn btnSmall hidden" id="modsOpenModrinthBtn" type="button" title="Открыть Modrinth во встроенном окне">Modrinth 🌐</button>
              <button class="btn btnSmall" id="modsUpdateAllBtn" type="button" title="Только для модов">Обновить всё</button>
            </div>
            <div class="modsGrid">
              <section class="modsPane">
                <div class="paneTitle">Установленные</div>
                <div class="paneActions">
                  <button class="btn btnSmall" id="modsRefreshBtn" type="button">Обновить</button>
                  <button class="btn btnSmall" id="modsOpenFolderBtn" type="button">Папка</button>
                  <button class="btn btnSmall" id="modsInstallFileBtn" type="button">Установить .jar</button>
                  <button class="btn btnSmall" id="modsAnalyzeBtn" type="button">Проверить</button>
                  <button class="btn btnSmall" id="modsRollbackBtn" type="button">Откат</button>
                  <button class="btn btnSmall" id="modsDisableLastBtn" type="button">Выключить последний</button>
                </div>
                <div class="list" id="modsInstalledList"></div>
              </section>
              <section class="modsPane">
                <div class="paneTitle">Результаты поиска</div>
                <div class="list" id="modsSearchList"></div>
              </section>
            </div>
            <div class="hint" id="modsHint"></div>
            <div class="list" id="modsIssues"></div>
          </div>
        </div>
      </div>

      <div class="modal hidden" id="modalVersionToolPick" role="dialog" aria-modal="true" aria-label="Выбор версий Bedrock">
        <div class="modalCard" style="max-width:420px;">
          <div class="modalHead">
            <div class="modalTitle">Выбор версий Bedrock</div>
            <button class="iconBtn" id="btnCloseVersionToolPick" type="button" aria-label="Закрыть">✕</button>
          </div>
          <div class="form">
            <div class="hrow" style="gap:10px; flex-wrap:wrap;">
              <button class="chip" id="btnVersionToolNew" type="button">Новые версии</button>
              <button class="chip" id="btnVersionToolOld" type="button">Старые версии</button>
            </div>
          </div>
        </div>
      </div>

    </main>
  </div>

  <script src="renderer.js"></script>
</body>
</html>


